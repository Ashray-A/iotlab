#include <Wire.h>
#include <LiquidCrystal_I2C.h>
#include <DHT.h>

LiquidCrystal_I2C lcd(0x27, 16, 2); 

#define DHTPIN 2       
#define DHTTYPE DHT11  
DHT dht(DHTPIN, DHTTYPE);

String dateTime = "";

void setup() {
  lcd.begin();
  lcd.backlight();
  Serial.begin(9600);
  dht.begin();

  lcd.setCursor(0, 0);
  lcd.print("Waiting for time");
}

void loop() {
  if (Serial.available()) {
    dateTime = Serial.readStringUntil('\n'); 

    lcd.clear();
    lcd.setCursor(0, 0);
    lcd.print(dateTime.substring(0, 10));
    lcd.setCursor(0, 1);
    lcd.print(dateTime.substring(11));     

    delay(2000);

    float temperature = dht.readTemperature();  
    float humidity = dht.readHumidity();

    lcd.clear();
    lcd.setCursor(0, 0);
    lcd.print("T:");
    lcd.print(isnan(temperature) ? "N/A" : String(temperature, 1));
    lcd.print((char)223); // Degree symbol
    lcd.print("C");

    lcd.setCursor(0, 1);
    lcd.print("H:");
    lcd.print(isnan(humidity) ? "N/A" : String(humidity, 0));
    lcd.print("%");

    delay(3000);  
  }
}

